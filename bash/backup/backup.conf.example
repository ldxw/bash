# ==========================================================
# 变动触发全量压缩备份脚本 - 配置文件示例
#
# 说明：
# - 本文件仅为示例，请复制为 backup.conf 后再修改
# - 不要把包含真实密码的文件提交到 GitHub
# - 所有以 ./ 开头的路径，都是相对于 backup.sh 所在目录
# ==========================================================


# ==========================================================
# 一、需要备份的目录（必须）
# ==========================================================
# 可以填写多个目录
# 每个目录都会：
# - 独立检测文件变化
# - 独立生成备份
# - 独立维护 .state 状态
#
# 注意：
# - 只检测“文件变化”，不关心目录本身
# - 目录路径必须是绝对路径
#
SOURCE_DIRS=(
  /path/to/data1
  /path/to/data2
)


# ==========================================================
# 二、本地备份输出目录
# ==========================================================
# 用于存放 zip 备份文件和 .state 状态目录
#
# 示例结构：
# DEST_DIR/
# └── data-xxxxxxxx/
#     ├── xxxx.zip
#     └── .state/
#
DEST_DIR=./backup_out


# ==========================================================
# 三、zip 加密密码
# ==========================================================
# zip 压缩使用加密
# 密码从文件中读取，避免明文写在配置里
#
# 示例：
# echo 'your-zip-password' > password
# chmod 600 password
#
PASSWORD_FILE=./password


# ==========================================================
# 四、备份触发与补传策略
# ==========================================================
# 是否只在文件发生变化时才备份
# 1 = 是（强烈推荐）
# 0 = 每次运行都重新打包
#
ONLY_BACKUP_WHEN_CHANGED=1

# 文件未变化，但某个后端没有该版本时，是否补传
# 1 = 是（推荐）
# 0 = 否
#
UPLOAD_MISSING_BACKENDS_WHEN_UNCHANGED=1


# ==========================================================
# 五、备份保留策略
# ==========================================================
# 备份保留时长（小时）
# 超过该时间的 zip 会被自动清理
#
RETENTION_HOURS=24

# 时区设置（用于时间计算）
#
TIMEZONE=Asia/Shanghai


# ==========================================================
# 六、主机名标识（可选）
# ==========================================================
# 用于远端目录分层：
# backup/<hostname>/<dir_key>/xxx.zip
#
# 留空则自动使用 hostname
#
HOSTNAME_OVERRIDE=


# ==========================================================
# 七、七牛对象存储（可选）
# ==========================================================
# 是否启用七牛
# 1 = 启用
# 0 = 禁用
#
ENABLE_QINIU=0

# 七牛 bucket 名称
#
QINIU_BUCKET=your-qiniu-bucket

# 七牛远端根目录
#
QINIU_DIR=backup


# ==========================================================
# 八、WebDAV（通用，兼容 AList / Nextcloud / 群晖）
# ==========================================================
# 是否启用 WebDAV
# 1 = 启用
# 0 = 禁用
#
ENABLE_WEBDAV=0

# WebDAV 基础地址（不要以 / 结尾）
#
# 示例：
# https://example.com/dav
# https://alist.example.com/dav
#
WEBDAV_BASE_URL=https://example.com/dav

# WebDAV 用户名
#
WEBDAV_USER=username

# WebDAV 密码文件（不要写明文密码）
#
# 示例：
# echo 'your-webdav-password' > webdav_pass
# chmod 600 webdav_pass
#
WEBDAV_PASS_FILE=./webdav_pass

# WebDAV 远端根目录
#
WEBDAV_DIR=backup
